# Мой опыт работы с Битрикс и php

## Обновление PHP
С сентября работаю над сайтом на Битрикс. Вот основные задачи, которые были выполнены:

1. **Обновление PHP с версии 7.3 до 8.0**
   Владельцы сайта пытались обновить PHP самостоятельно, но сайт падал после обновления. Проблема была в том, что при обновлении с версии 7.3 до 8.0 пропускались необходимые обновления ядра Битрикса для PHP 8.0. Проблему удалось решить последовательным обновлением PHP сначала до версии 7.4, а затем до 8.0, с обновлением Битрикса после каждого шага.

## Обновление Битрикса
2. **Обновление Битрикса до последней версии**
   При обновлении Битрикса до последней версии сайт переставал работать. Проблема заключалась в устаревших модулях Composer, которые не соответствовали новым версиям Битрикса. При обновлении модулей возникали конфликты зависимостей, которые пришлось устранять последовательно. Некоторые модули не поддерживались уже несколько лет, поэтому пришлось дописывать их вручную, скачав репозиторий модуля с лицензией MIT и разместив его локально в папке `local`. Большинство ошибок было связано с отсутствием возвращаемых типов данных в функциях.

## Перенос сайта на другой хостинг
3. **Перенос сайта на другой хостинг**
   Производил перенос сайта на другой хостинг с последующей настройкой сервера и выпуском сертификата.

## Ошибки после переноса
4. **Ошибки в запросах в мидлварах после переноса**
   После переноса сайта возникли ошибки в запросах в мидлварах. С помощью `try-catch` отловил ошибки. Оказалось, что часть методов получала не тот тип данных, который был ожидаем, что приводило к ошибке. Была добавлена проверка на тип данных.